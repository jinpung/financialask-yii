function registerAvatarLoader(){$(".doctor-result img.avatar-loader").load(function(){$(this).closest(".doctor-result").find(".avatar").css("background-image","url("+$(this).attr("src")+")")})}$(document).ready(function(){AL.bindEvents(),AL.loadData(),$(".open-filter-btn").click(function(){$(".page_wrapper .doctor-filter").slideToggle()})});var AL={options:{limit:10,offset:0,category:"suggest"},bindEvents:function(){var t=this,e;$(document).on("keyup",".search-nav .search-input",function(){if(""==$(this).val()?$(this).siblings(".search-x").hide():$(this).siblings(".search-x").show(),$(this).data("preval")!=$(this).val()){clearTimeout(e);var s=this;e=setTimeout(function(){t.loadData(!0),$(s).data("preval",$(s).val())},300)}}),$(document).on("click",".search-nav .search-x",function(){$(this).siblings(".search-x").val("").data("preval",""),clearTimeout(e),t.loadData(!0)}),$(document).on("search.in",".filter-item",function(){var t=$(this).data("type");$(this).hasClass("clickable-input")&&($(this).hide(),$(this).siblings("[data-type="+t+"]").show(),$(this).siblings("[data-type="+t+"]").find(".filter-input").focus(),$(this).data("value-set",!0)),$(this).hasClass("clickable-select")&&$(this).siblings("[data-type="+t+"]").slideDown(),$(this).data("in-edit",!0)}),$(document).on("search.out",".filter-item",function(){var t=$(this).data("type");$(this).hasClass("clickable-input")&&($(this).show(),$(this).siblings("[data-type="+t+"]").hide()),$(this).hasClass("clickable-select")&&($(this).siblings("[data-type="+t+"]").slideUp(),$(this).find(".filter-label").show(),$(this).find(".filter-value").hide(),$(this).find(".remove-filter-x").hide()),$(this).data("in-edit",!1).data("value-set",!1)}),$(document).on("search.select",".filter-item.clickable-select",function(t,e,s){$(this).find(".filter-label").hide(),$(this).find(".filter-value").text(s).show(),$(this).data("search-value",e),$(this).find(".remove-filter-x").show(),$(this).siblings("[data-type="+$(this).data("type")+"]").slideUp(),$(this).data("in-edit",!1).data("value-set",!0)}),$(document).on("click",".doctor-filter .select-results[data-type] .select-item",function(t){$(".filter-item[data-type="+$(this).closest(".select-results").data("type")+"]").trigger("search.select",[$(this).data("value")||$(this).text(),$(this).text()])}),$(document).on("click",".filter-item a",function(){var t=$(this).closest(".filter-item");t.trigger(t.hasClass("clickable-select")&&t.data("in-edit")?"search.out":"search.in")}),$(document).on("click",".filter-x",function(){var t=$(this).closest('[class*="filter-form"]');t.siblings(".filter-item[data-type="+t.data("type")+"]").trigger("search.out")}),$(document).on("click",".clickable-select .remove-filter-x",function(){var t=$(this).closest(".filter-item");t.trigger("search.out")}),$(document).on("click",".doctor-results .more-results",function(){$(this).find(".down-arrow").removeClass("down-arrow").addClass("fg-spinner"),t.loadData()}),$(document).on("click",".doctor-filter .filter-btn",function(){t.options.category="search",$(".doctor-results.suggest-doctors").hide(),$(".doctor-results.search-results").show(),t.fetchQueries(!0),t.loadData(!0)})},loadData:function(t){var e=$("suggest"==this.options.category?".doctor-results.suggest-doctors":".doctor-results.search-results");this.options.offset=t?0:e.find(".doctor-result").length,this.fetchQueries(),$.ajax({url:"getadvisers",type:"get",dataType:"text",data:this.options,success:function(s){e.find(".more-results").remove(),t&&e.find(".doctor-result").remove(),e.append(s),registerAvatarLoader()}})},fetchQueries:function(t){var e=this;this.options.searchword=$(".search-nav .search-input").val(),t&&$(".doctor-filter .filter-item").each(function(){var t=$(this).data("type");delete e.options[t],$(this).data("value-set")&&($(this).hasClass("clickable-input")&&(e.options[t]=$(this).siblings("[data-type="+t+"]").find(".filter-input").val()),$(this).hasClass("clickable-select")&&(e.options[t]=$(this).data("search-value"))),$(this).hasClass("clickable-radio-group")&&$(this).find(".fg-radio:checked").length>0&&(e.options[t]=$(this).find(".fg-radio:checked").val()),$(this).hasClass("clickable-checkbox")&&$(this).find(".fg-checkbox:checked").length>0&&(e.options[t]=1)})}};